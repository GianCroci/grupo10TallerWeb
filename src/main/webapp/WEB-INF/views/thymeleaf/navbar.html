<link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/nav.css}" />

<nav th:fragment="nav"
     style="
       background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 25%, #dcc284 50%, #d4b876 75%, #c9a96e 100%);
       padding: 15px 20px;
       font-family: 'MedievalSharp', cursive;
       border: 3px solid #8b4513;
       border-radius: 0;
       box-shadow:
         inset 0 0 20px rgba(139, 69, 19, 0.3),
         0 4px 8px rgba(0, 0, 0, 0.3),
         0 0 0 1px #654321;
       position: relative;
     ">

    <!-- Fondo decorativo -->
    <div style="
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 80% 70%, rgba(101, 67, 33, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 40% 80%, rgba(160, 82, 45, 0.1) 1px, transparent 1px);
      background-size: 30px 30px, 25px 25px, 35px 35px;
      pointer-events: none;
    "></div>

    <!-- Borde decorativo -->
    <div style="
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent 0%, rgba(139, 69, 19, 0.4) 50%, transparent 100%);
      border-radius: 0;
      pointer-events: none;
    "></div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="navbar-content d-flex justify-content-center align-items-center position-relative" style="z-index: 2;">

        <!-- MENÚ CENTRADO -->
        <ul class="d-flex flex-wrap justify-content-center align-items-center gap-3 m-0 p-0" style="list-style: none;">
            <li><a th:href="@{/home}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Inicio</a></li>
            <li><a th:href="@{/taberna}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Taberna</a></li>
            <li><a th:href="@{/mercado}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Mercado</a></li>
            <li><a th:href="@{/inventario}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Inventario</a></li>
            <li><a id="herreria" th:href="@{/herreria}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Herrería</a></li>
            <li>
                <a href="#"
                   th:attr="data-salaid=${salaPendienteId}, data-miid=${#httpSession.getAttribute('personaje') != null ? #httpSession.getAttribute('personaje').id : 0}"
                   th:if="${tieneDesafio}"
                   id="btn-batalla-pendiente"
                   style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;"
                   onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">
                    Batalla <span style="color: #8b0000;">¡</span>
                </a>
                <a th:href="@{/batalla}"
                   th:unless="${tieneDesafio}"
                   style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;"
                   onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">
                    Batalla
                </a>
            </li>
            <li><a th:href="@{/amigos}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Amigos</a></li>
            <li><a th:href="@{/tablon-enemigos}" style="color: #4a2c17; font-weight: bold; text-decoration: none; padding: 8px 12px; border-radius: 4px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'" onmouseout="this.style.background='transparent'">Enemigos</a></li>
        </ul>

        <!-- PERFIL A LA DERECHA -->
        <div class="ms-auto d-flex align-items-center position-absolute end-0 me-4">
            <img th:src="${session.imagenPersonaje}"
                 class="avatar-medieval"
                 style="border: 2px solid #8b4513; border-radius: 50%; width: 40px; height: 40px; object-fit: cover; box-shadow: 0 2px 4px rgba(139, 69, 19, 0.5);"
                 th:style="'border: 2px solid #8b4513; border-radius: 50%; width: 40px; height: 40px; object-fit: cover; box-shadow: 0 2px 4px rgba(139, 69, 19, 0.5);' + (${session.imagenPersonaje == null} ? ' background-color: black;' : '')" />
            <a href="#" class="dropdown-toggle d-flex align-items-center ms-2"
               id="dropdownPerfil"
               data-bs-toggle="dropdown"
               aria-expanded="false"
               style="text-decoration: none; color: #4a2c17; font-weight: bold; text-shadow: 1px 1px 2px rgba(255,255,255,0.7); padding: 5px 10px; border-radius: 3px; transition: all 0.3s ease;"
               onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#2d1810';"
               onmouseout="this.style.background='transparent'; this.style.color='#4a2c17';">
                <span th:text="${session.nombrePersonaje}">Nombre</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdownPerfil"
                style="background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 25%, #dcc284 50%, #d4b876 75%, #c9a96e 100%);
                       border: 2px solid #8b4513;
                       box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);">
                <li><a class="dropdown-item"
                       th:href="@{/logout}"
                       style="color: #4a2c17; font-weight: bold; text-shadow: 1px 1px 2px rgba(255,255,255,0.7); padding: 8px 15px; transition: all 0.3s ease;"
                       onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#2d1810';"
                       onmouseout="this.style.background='transparent'; this.style.color='#4a2c17';">
                    Logout
                </a></li>
            </ul>
        </div>
    </div>
</nav>
